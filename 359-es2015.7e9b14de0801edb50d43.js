(self.webpackChunkharri_io=self.webpackChunkharri_io||[]).push([[359],{3359:function(e,t,n){"use strict";n.r(t),n.d(t,{CommentTreeModule:function(){return P}});var r,s=n(8583),i=n(3679),o=n(6983),a=n(957),c=new Uint8Array(16);function g(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(c)}for(var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,h=function(e){return"string"==typeof e&&d.test(e)},u=[],p=0;p<256;++p)u.push((p+256).toString(16).substr(1));var l=function(e,t,n){var r=(e=e||{}).random||(e.rng||g)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=r[s];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!h(n))throw TypeError("Stringified UUID is invalid");return n}(r)},f=n(7716),m=n(2909),y=n(9075);let C=(()=>{class e{constructor(e){this.elementRef=e}ngOnInit(){this.elementRef.nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(f.SBq))},e.\u0275dir=f.lG2({type:e,selectors:[["","myAutofocus",""]]}),e})();function x(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"input",12),f.NdJ("keydown.enter",function(t){f.CHM(e);const n=f.oxw().$implicit;return f.oxw(2).replyToMessage(n,t)}),f.qZA()}if(2&e){const e=f.oxw().$implicit;f.Q6J("placeholder","Respond to "+e.sender+"...")}}function O(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"harri-io-thread",13),f.NdJ("messageReplier",function(t){return f.CHM(e),f.oxw(3).messageReplier.emit(t)}),f.qZA()}if(2&e){const e=f.oxw().$implicit;f.Q6J("messages",e.children)}}function v(e,t){if(1&e&&(f.ynx(0),f.TgZ(1,"div",2),f.TgZ(2,"div",3),f._UZ(3,"img",4),f.TgZ(4,"div",5),f.TgZ(5,"div",6),f._uU(6),f.qZA(),f.TgZ(7,"p",7),f._uU(8),f.qZA(),f.TgZ(9,"div",8),f.TgZ(10,"img",9),f.NdJ("click",function(){const e=t.$implicit;return e.replying=!e.replying}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(11,x,1,1,"input",10),f.qZA(),f.YNc(12,O,1,1,"harri-io-thread",11),f.BQk()),2&e){const e=t.$implicit,n=f.oxw(2);f.xp6(3),f.Q6J("src",n.sanitize("data:image/svg+xml;utf8,"+n.generateAvatarBuffer(e.sender)),f.LSH),f.xp6(3),f.Oqu(e.sender),f.xp6(2),f.Oqu(e.text),f.xp6(2),f.Q6J("src",e.replying?"assets/comment-tree/reply-filled.svg":"assets/comment-tree/reply.svg",f.LSH),f.xp6(1),f.Q6J("ngIf",e.replying),f.xp6(1),f.Q6J("ngIf",e.children)}}function w(e,t){if(1&e&&(f.ynx(0),f.YNc(1,v,13,6,"ng-container",1),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngForOf",e.messages)}}let M=(()=>{class e{constructor(e){this.sanitizer=e,this.messages=[],this.messageReplier=new f.vpe,this.replyToMessage=(e,{target:{value:t}})=>{e.replying=!1;const n=e.children;this.messageReplier.emit(Object.assign(Object.assign({},e),{replying:!1,children:[{id:l(),sender:"Me",text:t,children:[]},...n]}))},this.sanitize=e=>this.sanitizer.bypassSecurityTrustUrl(e),this.generateAvatarBuffer=e=>(0,m.z)(e)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(y.H7))},e.\u0275cmp=f.Xpm({type:e,selectors:[["harri-io-thread"]],inputs:{messages:"messages"},outputs:{messageReplier:"messageReplier"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"wrapper"],[1,"left"],[1,"avatar",3,"src"],[1,"message"],[1,"sender"],[1,"content"],[1,"icons"],[3,"src","click"],["type","text","class","composer","myAutofocus","",3,"placeholder","keydown.enter",4,"ngIf"],["class","nested",3,"messages","messageReplier",4,"ngIf"],["type","text","myAutofocus","",1,"composer",3,"placeholder","keydown.enter"],[1,"nested",3,"messages","messageReplier"]],template:function(e,t){1&e&&f.YNc(0,w,2,1,"ng-container",0),2&e&&f.Q6J("ngIf",t.messages)},directives:[s.O5,s.sg,C,e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin-left:20px;color:#000}[_nghost-%COMP%]:first-child{padding-top:20px;padding-right:20px}[_nghost-%COMP%]   .composer[_ngcontent-%COMP%], [_nghost-%COMP%]   .message[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px}[_nghost-%COMP%]   .composer[_ngcontent-%COMP%]{min-width:200px;width:calc(100% - 70px - 16px - 16px);margin-left:70px;margin-top:16px;border:unset}[_nghost-%COMP%]   .composer[_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-bottom:16px}[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   img.avatar[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:30px;margin-right:10px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;flex-direction:column;min-width:100px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .sender[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:0 0 5px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{height:32px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.nested[_nghost-%COMP%], .nested   [_nghost-%COMP%]{margin-left:70px}.nested[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .nested   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{align-items:center}"]}),e})(),_=(()=>{class e{constructor(){this.error="",this.messagesValue=[{id:l(),sender:"Amy",text:"Hi guys I was just wondering if it was possible to still join the Gin + Juice event? I was hoping to get 3 invites. Thanks, Amy.",children:[{id:l(),sender:"Dan",text:"Hi, can you sign me up to your gig?",children:[{id:l(),sender:"John",text:"Sorry, no can do mate",children:[{id:l(),sender:"Harri",text:"Why not though? That's rubbish...",children:[]}]}]},{id:l(),sender:"Amy",text:"Which one?",children:[]},{id:l(),sender:"Dan",text:"Next fri",children:[]}]}],this.prettyPrint=e=>JSON.stringify(e,void 0,4),this.processMessageReply=e=>{this.messagesValue.forEach((t,n,r)=>r[n]=this.scan(e.id,t=>e)(t)),this.thread=JSON.stringify(this.messagesValue),this.model=Object.assign(Object.assign({},this.model),{value:this.thread})},this.scan=(e,t)=>n=>JSON.parse(JSON.stringify(n,(n,r)=>"object"==typeof r&&null!==r&&r.id===e?(console.warn(t(r)),t(r)):r)),this.theme="vs-dark",this.model={language:"json",uri:"main.json",value:this.thread},this.options={contextmenu:!0,minimap:{enabled:!0}}}get thread(){return this.prettyPrint(this.messagesValue)}set thread(e){try{this.messagesValue=JSON.parse(e),this.error=""}catch(t){this.error=t.message,console.error("error occored while you were typing the JSON")}}onCodeChanged(e){this.thread=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["harri-io-comment-tree"]],decls:2,vars:4,consts:[[3,"messages","messageReplier"],[3,"theme","codeModel","options","valueChanged"]],template:function(e,t){1&e&&(f.TgZ(0,"harri-io-thread",0),f.NdJ("messageReplier",function(e){return t.processMessageReply(e)}),f.qZA(),f.TgZ(1,"ngs-code-editor",1),f.NdJ("valueChanged",function(e){return t.onCodeChanged(e)}),f.qZA()),2&e&&(f.Q6J("messages",t.messagesValue),f.xp6(1),f.Q6J("theme",t.theme)("codeModel",t.model)("options",t.options))},directives:[M,a.wI],styles:["[_nghost-%COMP%]{height:calc(100vh - 60px - 32px);display:flex;flex-direction:row;background:#e5e5e5;overflow:hidden}harri-io-thread[_ngcontent-%COMP%]{resize:horizontal}harri-io-thread[_ngcontent-%COMP%], ngs-code-editor[_ngcontent-%COMP%]{height:calc(100vh - 60px - 32px);flex-grow:1;flex-basis:0}ngs-code-editor[_ngcontent-%COMP%]{max-width:50%}"]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[s.ez,i.u5,a.Y0.forChild(),o.Bz.forChild([{path:"",component:_}])]]}),e})()},2906:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2562);function i(e){var t=parseInt(e,16);return(t>>16&255)+","+(t>>8&255)+","+(255&t)}function o(e){return(16777215^Number("0x1"+e)).toString(16).substr(1).toUpperCase()}function a(e,t,n){var r=300-e;return"m 150 "+(100+t+200*n)+" Q "+r+" "+e+" "+(200-t-200*n)+" 150 Q "+r+" "+r+" 150 "+(200-t-200*n)+" Q "+e+" "+r+" "+(100+t+200*n)+" 150 Q "+e+" "+e+" 150 "+(100+t+200*n)+" z"}t.invertHex=o,t.generatePath=a,t.generateFromString=function(e){var t,n=s.md5(e).split("").filter(function(e){return"-"!==e}),c=n.splice(0,6).join(""),g=n.splice(n.length-6,n.length).join(""),d=r(Array(10)).map(function(){return parseInt(n.splice(0,2).join(""),16)});return'<svg width="300" height="300" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg"><rect id="bg" width="300" height="300" fill="rgb('+i((t={paths:[a(d[0],d[1],2),a(d[2],d[3],1),a(d[4],d[5],0)],colors:[g,o(g),o(c)],background:c}).background)+')" /><path d="'+t.paths[0]+'" fill="rgb('+i(t.colors[0])+')" /><path d="'+t.paths[1]+'" fill="rgb('+i(t.colors[1])+')" /><path d="'+t.paths[2]+'" fill="rgb('+i(t.colors[2])+')" /></svg>'}},2909:function(e,t,n){"use strict";var r=n(2906);t.z=r.generateFromString},2562:function(e,t){"use strict";function n(e,t){var n=e[0],r=e[1],c=e[2],g=e[3];n=s(n,r,c,g,t[0],7,-680876936),g=s(g,n,r,c,t[1],12,-389564586),c=s(c,g,n,r,t[2],17,606105819),r=s(r,c,g,n,t[3],22,-1044525330),n=s(n,r,c,g,t[4],7,-176418897),g=s(g,n,r,c,t[5],12,1200080426),c=s(c,g,n,r,t[6],17,-1473231341),r=s(r,c,g,n,t[7],22,-45705983),n=s(n,r,c,g,t[8],7,1770035416),g=s(g,n,r,c,t[9],12,-1958414417),c=s(c,g,n,r,t[10],17,-42063),r=s(r,c,g,n,t[11],22,-1990404162),n=s(n,r,c,g,t[12],7,1804603682),g=s(g,n,r,c,t[13],12,-40341101),c=s(c,g,n,r,t[14],17,-1502002290),n=i(n,r=s(r,c,g,n,t[15],22,1236535329),c,g,t[1],5,-165796510),g=i(g,n,r,c,t[6],9,-1069501632),c=i(c,g,n,r,t[11],14,643717713),r=i(r,c,g,n,t[0],20,-373897302),n=i(n,r,c,g,t[5],5,-701558691),g=i(g,n,r,c,t[10],9,38016083),c=i(c,g,n,r,t[15],14,-660478335),r=i(r,c,g,n,t[4],20,-405537848),n=i(n,r,c,g,t[9],5,568446438),g=i(g,n,r,c,t[14],9,-1019803690),c=i(c,g,n,r,t[3],14,-187363961),r=i(r,c,g,n,t[8],20,1163531501),n=i(n,r,c,g,t[13],5,-1444681467),g=i(g,n,r,c,t[2],9,-51403784),c=i(c,g,n,r,t[7],14,1735328473),n=o(n,r=i(r,c,g,n,t[12],20,-1926607734),c,g,t[5],4,-378558),g=o(g,n,r,c,t[8],11,-2022574463),c=o(c,g,n,r,t[11],16,1839030562),r=o(r,c,g,n,t[14],23,-35309556),n=o(n,r,c,g,t[1],4,-1530992060),g=o(g,n,r,c,t[4],11,1272893353),c=o(c,g,n,r,t[7],16,-155497632),r=o(r,c,g,n,t[10],23,-1094730640),n=o(n,r,c,g,t[13],4,681279174),g=o(g,n,r,c,t[0],11,-358537222),c=o(c,g,n,r,t[3],16,-722521979),r=o(r,c,g,n,t[6],23,76029189),n=o(n,r,c,g,t[9],4,-640364487),g=o(g,n,r,c,t[12],11,-421815835),c=o(c,g,n,r,t[15],16,530742520),n=a(n,r=o(r,c,g,n,t[2],23,-995338651),c,g,t[0],6,-198630844),g=a(g,n,r,c,t[7],10,1126891415),c=a(c,g,n,r,t[14],15,-1416354905),r=a(r,c,g,n,t[5],21,-57434055),n=a(n,r,c,g,t[12],6,1700485571),g=a(g,n,r,c,t[3],10,-1894986606),c=a(c,g,n,r,t[10],15,-1051523),r=a(r,c,g,n,t[1],21,-2054922799),n=a(n,r,c,g,t[8],6,1873313359),g=a(g,n,r,c,t[15],10,-30611744),c=a(c,g,n,r,t[6],15,-1560198380),r=a(r,c,g,n,t[13],21,1309151649),n=a(n,r,c,g,t[4],6,-145523070),g=a(g,n,r,c,t[11],10,-1120210379),c=a(c,g,n,r,t[2],15,718787259),r=a(r,c,g,n,t[9],21,-343485551),e[0]=h(n,e[0]),e[1]=h(r,e[1]),e[2]=h(c,e[2]),e[3]=h(g,e[3])}function r(e,t,n,r,s,i){return t=h(h(t,e),h(r,i)),h(t<<s|t>>>32-s,n)}function s(e,t,n,s,i,o,a){return r(t&n|~t&s,e,t,i,o,a)}function i(e,t,n,s,i,o,a){return r(t&s|n&~s,e,t,i,o,a)}function o(e,t,n,s,i,o,a){return r(t^n^s,e,t,i,o,a)}function a(e,t,n,s,i,o,a){return r(n^(t|~s),e,t,i,o,a)}function c(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}Object.defineProperty(t,"__esModule",{value:!0});var g="0123456789abcdef".split("");function d(e){for(var t="",n=0;n<4;n++)t+=g[e>>8*n+4&15]+g[e>>8*n&15];return t}function h(e,t){return e+t&4294967295}t.md5=function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t[n]=d(e[n]);return t.join("")}(function(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)n(s,c(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(s,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,n(s,i),s}(e))}}}]);